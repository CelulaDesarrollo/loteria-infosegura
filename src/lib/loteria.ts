export interface Card {
  id: number;
  name: string;
  imageUrl: string;
  description: string;
}

// A selection of 24 cards for the game
export const CARDS: Card[] = [
  { id: 1, name: "LA INFORMACIÓN", imageUrl: "/cards/1.jpg", description: "El Gallo simboliza el amanecer y la vigilancia. Es un llamado a estar atentos y preparados para nuevas oportunidades." },
  { id: 2, name: "EL USUARIO", imageUrl: "/cards/2.jpg", description: "El Diablo representa las tentaciones y los desafíos que enfrentamos. Nos recuerda la importancia de la autodisciplina y la integridad." },
  { id: 3, name: "EL CIBERDELINCUENTE", imageUrl: "/cards/3.jpg", description: "La Dama simboliza la elegancia y la gracia. Nos invita a valorar la belleza en nuestras vidas y a actuar con cortesía y respeto hacia los demás." },
  { id: 4, name: "LA CIBERSEGURIDAD", imageUrl: "/cards/4.jpg", description: "El Catrín representa la sofisticación y el estilo. Nos anima a ser auténticos y a expresar nuestra individualidad con confianza." },
  { id: 5, name: "EL PARAGUAS", imageUrl: "/cards/5.jpg", description: "El Paraguas simboliza la protección y la seguridad. Nos recuerda la importancia de cuidar de nosotros mismos y de nuestros seres queridos." },
  { id: 6, name: "LA INGENIERÍA SOCIAL", imageUrl: "/cards/6.jpg", description: "La Sirena representa la belleza y el misterio del mar. Nos invita a explorar lo desconocido y a confiar en nuestra intuición." },
  { id: 7, name: "LAS CIBERAMENAZAS", imageUrl: "/cards/7.jpg", description: "La Escalera simboliza el progreso y la superación personal. Nos anima a seguir adelante y a alcanzar nuestras metas con determinación." },
  { id: 8, name: "EL PHISHING", imageUrl: "/cards/8.jpg", description: "La Botella representa la celebración y la alegría. Nos recuerda la importancia de disfrutar de los momentos especiales y de compartir con quienes amamos." },
  { id: 9, name: "EL MALWARE", imageUrl: "/cards/9.jpg", description: "El Barril simboliza la abundancia y la prosperidad. Nos invita a ser generosos y a valorar lo que tenemos." },
  { id: 10, name: "INFOSEGURA", imageUrl: "/cards/10.jpg", description: "El Árbol representa la vida y el crecimiento. Nos recuerda la importancia de nuestras raíces y de nutrir nuestro desarrollo personal." },
  { id: 11, name: "LA CONTRASEÑA SEGURA", imageUrl: "/cards/11.jpg", description: "El Melón simboliza la dulzura y la satisfacción. Nos anima a disfrutar de los placeres simples de la vida y a compartir con los demás." },
  { id: 12, name: "LAS COPIAS DE SEGURIDAD", imageUrl: "/cards/12.jpg", description: "El Valiente representa el coraje y la determinación. Nos invita a enfrentar nuestros miedos y a actuar con valentía en la búsqueda de nuestros sueños." },
  { id: 13, name: "LAS ACTUALIZACIONES DE SOFTWARE", imageUrl: "/cards/13.jpg", description: "El Gorrito simboliza la alegría y la festividad. Nos recuerda la importancia de celebrar la vida y de mantener una actitud positiva." },
  { id: 14, name: "EL DOBLE FACTOR DE AUTENTICACIÓN", imageUrl: "/cards/14.jpg", description: "La Muerte representa la transformación y el renacimiento. Nos invita a aceptar los cambios y a ver las oportunidades que surgen de los finales." },
  { id: 15, name: "EL ANTIMALWARE", imageUrl: "/cards/15.jpg", description: "La Pera simboliza la fertilidad y la abundancia. Nos anima a valorar la generosidad de la naturaleza y a compartir nuestros recursos con los demás." },
  { id: 16, name: "EL SENTIDO COMÚN", imageUrl: "/cards/16.jpg", description: "La Bandera representa la identidad y el orgullo. Nos invita a honrar nuestras raíces y a celebrar nuestra cultura con respeto y dignidad." },
  { id: 17, name: "EL SOFTWARE LEGÍTIMO", imageUrl: "/cards/17.jpg", description: "El Bandolón simboliza la música y la alegría. Nos recuerda la importancia de la expresión artística y de encontrar armonía en nuestras vidas." },
  { id: 18, name: "EL UV-CIRST", imageUrl: "/cards/18.jpg", description: "El Violoncello representa la profundidad y la emoción. Nos invita a conectar con nuestros sentimientos y a expresar nuestra verdad con autenticidad." },
  { id: 19, name: "La Navegación Segura", imageUrl: "/cards/19.jpg", description: "La Garza simboliza la elegancia y la paciencia. Nos anima a observar nuestro entorno con atención y a actuar con sabiduría en nuestras decisiones." },
  { id: 20, name: "Los Dispositivos Protegidos", imageUrl: "/cards/20.jpg", description: "El Nopal representa la resistencia y la adaptabilidad. Nos recuerda la importancia de ser fuertes frente a las adversidades y de aprender de nuestras experiencias." },
  { id: 21, name: "La Identidad Digital", imageUrl: "/cards/21.jpg", description: "El Cactus simboliza la protección y la defensa. Nos invita a cuidar de nuestra identidad y a ser conscientes de cómo nos presentamos al mundo." },
  { id: 22, name: "El Respeto En Línea", imageUrl: "/cards/22.jpg", description: "El Camarón representa la humildad y la cooperación. Nos anima a trabajar juntos y a valorar las contribuciones de los demás en nuestras vidas." },
  { id: 23, name: "Los Fraudes En Línea", imageUrl: "/cards/23.jpg", description: "La Chalupa simboliza la aventura y el descubrimiento. Nos invita a explorar nuevos horizontes y a ser valientes en la búsqueda de nuestras metas." },
  { id: 24, name: "Las Comunicaciones Cifradas", imageUrl: "/cards/24.jpg", description: "El Corazón representa el amor y la compasión. Nos recuerda la importancia de cuidar nuestras relaciones y de actuar con empatía hacia los demás." },
  { id: 25, name: "El Wi-Fi Confiable", imageUrl: "/cards/25.jpg", description: "El Gato simboliza la independencia y la curiosidad. Nos anima a explorar el mundo con mente abierta y a confiar en nuestra intuición." },
  { id: 26, name: "El Reporte", imageUrl: "/cards/26.jpg", description: "El Sol representa la energía y la vitalidad. Nos invita a brillar con nuestra luz interior y a compartir nuestra alegría con el mundo."},
  { id: 27, name: "El Cierre de Sesión", imageUrl: "/cards/27.jpg", description: "La Luna simboliza los ciclos y la intuición. Nos recuerda la importancia de escuchar nuestra voz interior y de respetar nuestros ritmos naturales." },
  { id: 28, name: "El Escritorio Limpio", imageUrl: "/cards/28.jpg", description: "La Estrella representa la esperanza y la inspiración. Nos anima a seguir nuestros sueños y a mantener la fe en nuestras capacidades." },
  { id: 29, name: "La Privacidad en Redes Sociales", imageUrl: "/cards/29.jpg", description: "El Cielo simboliza la libertad y la expansión. Nos invita a soñar en grande y a buscar nuevas oportunidades para crecer y aprender." },
  { id: 30, name: "La Normatividad", imageUrl: "/cards/30.jpg", description: "La Tierra representa la estabilidad y la conexión con nuestras raíces. Nos recuerda la importancia de cuidar nuestro entorno y de vivir en armonía con la naturaleza." },
  { id: 31, name: "El Aviso de Privacidad", imageUrl: "/cards/31.jpg", description: "El Reloj simboliza el tiempo y la paciencia. Nos invita a valorar cada momento y a actuar con sabiduría en nuestras decisiones." },
  { id: 32, name: "La Alerta de Seguridad", imageUrl: "/cards/32.jpg", description: "El Libro representa el conocimiento y la sabiduría. Nos anima a aprender continuamente y a compartir lo que sabemos con los demás." }, 
  { id: 33, name: "Los Permisos de Aplicaciones", imageUrl: "/cards/33.jpg", description: "La Montaña simboliza la fortaleza y la perseverancia. Nos recuerda la importancia de superar los desafíos y de mantenernos firmes en nuestras convicciones." },
  { id: 34, name: "La Cuenta Única", imageUrl: "/cards/34.jpg", description: "El Río representa el flujo y la adaptabilidad. Nos invita a ser flexibles y a adaptarnos a los cambios con gracia y resiliencia." },
  { id: 35, name: "El Borrado Seguro", imageUrl: "/cards/35.jpg", description: "El Puente simboliza la conexión y la colaboración. Nos anima a construir relaciones sólidas y a trabajar juntos para alcanzar objetivos comunes." },
  { id: 36, name: "La Higiene Digital", imageUrl: "/cards/36.jpg", description: "El Teléfono representa la comunicación y la conectividad. Nos recuerda la importancia de mantenernos en contacto con nuestros seres queridos y de usar la tecnología de manera responsable." },
  { id: 37, name: "Las Compras Seguras", imageUrl: "/cards/37.jpg", description: "El Niño simboliza la inocencia y la curiosidad. Nos invita a proteger a los más vulnerables y a fomentar un entorno seguro para su crecimiento." },
  { id: 38, name: "El Bloqueo de Pantalla", imageUrl: "/cards/38.jpg", description: "El Espejo representa la reflexión y la autoevaluación. Nos anima a conocernos a nosotros mismos y a actuar con integridad en todas nuestras interacciones." },
  { id: 39, name: "El Estudiante Ciberseguro", imageUrl: "/cards/39.jpg", description: "La Nube simboliza la innovación y la conectividad global. Nos invita a aprovechar las oportunidades que ofrece la tecnología para mejorar nuestras vidas." },
  { id: 40, name: "El Smishing", imageUrl: "/cards/40.jpg", description: "El Microscopio representa la atención al detalle y el análisis crítico. Nos recuerda la importancia de evaluar cuidadosamente nuestras decisiones y acciones." },
  { id: 41, name: "El Vishing", imageUrl: "/cards/41.jpg", description: "El Candado simboliza la seguridad y la protección. Nos anima a cuidar nuestra información personal y a ser conscientes de cómo la compartimos en línea." },
  { id: 42, name: "El Quishing", imageUrl: "/cards/42.jpg", description: "El Globo representa la diversidad y la inclusión. Nos invita a valorar las diferencias y a construir una comunidad segura y respetuosa para todos." },
  { id: 43, name: "El Ransomware", imageUrl: "/cards/43.jpg", description: "El Bombero simboliza la valentía y la acción rápida. Nos recuerda la importancia de estar preparados para enfrentar emergencias y proteger a nuestra comunidad." },
  { id: 44, name: "Los Deepfakes", imageUrl: "/cards/44.jpg", description: "El Escritorio representa la productividad y el equilibrio entre el trabajo y la vida personal. Nos invita a crear un entorno de trabajo seguro y saludable, incluso desde casa." },
  { id: 45, name: "El Cyberbullying", imageUrl: "/cards/45.jpg", description: "El Megáfono simboliza la voz y la influencia. Nos anima a usar las redes sociales de manera responsable y a ser conscientes del impacto de nuestras palabras y acciones en línea." },
  { id: 46, name: "Los Datos Personales", imageUrl: "/cards/46.jpg", description: "La Carreta representa el comercio y la prosperidad. Nos recuerda la importancia de proteger nuestras transacciones en línea y de ser consumidores informados." },
  { id: 47, name: "La Publicidad Engañosa", imageUrl: "/cards/47.jpg", description: "El Robot simboliza la innovación y la tecnología avanzada. Nos invita a ser conscientes de los riesgos asociados con los dispositivos conectados y a tomar medidas para proteger nuestra privacidad." },
  { id: 48, name: "El Spam", imageUrl: "/cards/48.jpg", description: "El Cerebro representa la inteligencia y la creatividad. Nos anima a explorar las posibilidades de la inteligencia artificial de manera ética y responsable." },
  { id: 49, name: "El DISI", imageUrl: "/cards/49.jpg", description: "El Camión simboliza el transporte y la logística. Nos recuerda la importancia de proteger nuestras cadenas de suministro y de garantizar la seguridad de los productos que consumimos." },
  { id: 50, name: "El Software Pirata", imageUrl: "/cards/50.jpg", description: "La Torre representa la fortaleza y la protección. Nos invita a valorar y proteger las infraestructuras esenciales que sustentan nuestra sociedad." },
  { id: 51, name: "Las Fake News", imageUrl: "/cards/51.jpg", description: "El Corazón Médico simboliza la salud y el bienestar. Nos recuerda la importancia de proteger nuestra información médica y de usar la tecnología para mejorar nuestra salud." },
  { id: 52, name: "La USB Desconocida", imageUrl: "/cards/52.jpg", description: "El Lápiz representa el aprendizaje y la creatividad. Nos anima a aprovechar las oportunidades de la educación en línea de manera segura y efectiva." },
  { id: 53, name: "El Borrado Remoto", imageUrl: "/cards/53.jpg", description: "El Control Remoto simboliza la diversión y el ocio. Nos invita a disfrutar del entretenimiento digital de manera responsable y a ser conscientes de los riesgos asociados." },
  { id: 54, name: "La Reputación en línea", imageUrl: "/cards/54.jpg", description: "El Maletín representa el profesionalismo y la eficiencia. Nos recuerda la importancia de proteger la información empresarial y de mantener la confidencialidad en nuestras comunicaciones." },
  { id: 55, name: "El Perfil Desconocido", imageUrl: "/cards/55.jpg", description: "La Bombilla simboliza la creatividad y la innovación. Nos anima a explorar nuevas ideas y tecnologías de manera segura y ética." }

];

export const WINNING_PATTERNS: number[][] = [
  // Rows
  [0, 1, 2, 3],
  [4, 5, 6, 7],
  [8, 9, 10, 11],
  [12, 13, 14, 15],
  // Columns
  [0, 4, 8, 12],
  [1, 5, 9, 13],
  [2, 6, 10, 14],
  [3, 7, 11, 15],
  // Diagonals
  [0, 5, 10, 15],
  [3, 6, 9, 12],
  // Four Corners
  [0, 3, 12, 15],
  // Square
  [0, 1, 4, 5]
];

/**
 * Shuffles an array in place using the Fisher-Yates algorithm.
 * @param array The array to shuffle.
 * @returns The shuffled array.
 */
export function shuffle<T>(array: T[]): T[] {
  const newArray = [...array];
  for (let i = newArray.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
  }
  return newArray;
}

/**
 * Generates a random 16-card Lotería board.
 * @returns An array of 16 unique Card objects.
 */
export function generateBoard(): Card[] {
  return shuffle(CARDS).slice(0, 16);
}

/**
 * Creates a full shuffled deck for the dealer.
 * @returns A shuffled array of all Card objects.
 */
export function createDeck(): Card[] {
  return shuffle(CARDS);
}

/**
 * Checks if a set of marked indices on a board constitutes a win.
 * @param markedIndices The indices of the marked cards (0-15).
 * @returns True if a winning pattern is met, false otherwise.
 */
export function checkWin(
  markedIndices: number[],
  board: Card[],
  calledCardIds: number[]
): boolean {
  // Todas las cartas marcadas deben estar en las llamadas y deben ser 16
  return (
    markedIndices.length === 16 &&
    markedIndices.every(idx => calledCardIds.includes(board[idx].id))
  );
}
